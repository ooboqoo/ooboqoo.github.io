# JavaWeb 项目之前后端分离

[精]JavaWeb项目为什么要放弃jsp，为什么要前后端解耦？ http://blog.csdn.net/piantoutongyang/article/details/65446892  


## 前戏

前后端分离已成为互联网项目开发的业界标准使用方式，通过 nginx + [nodejs +] tomcat 的方式有效地进行解耦，并且前后端分离会为以后的大型分布式架构、弹性计算架构、微服务架构、多端化服务 (多种客户端，如：浏览器，车载终端，安卓，iOS 等) 打下坚实的基础。这个步骤是系统架构从猿进化成人的必经之路。

核心思想是前端 html 页面通过 ajax 调用后端的 restful api 接口并使用 json 数据进行交互。

> 名词解释：在互联网架构中，  
> **web服务器**一般指像 nginx，apache 这类服务器，他们主要负责解析静态资源。  
> **应用服务器**一般指像 tomcat，jetty，resin 这类服务器，主要负责解析动态资源。  
> 一般都是只有web服务器才能被外网访问，应用服务器只能内网访问。


## 术业有专攻

以前的 JavaWeb 项目大多数都是 Java 程序员又当爹又当妈。随着时代的发展，渐渐前后端的界限分的越来越明确。正所谓术业有专攻，一个人如果什么都会，那么他毕竟什么都不精。

后端追求的是：三高（高并发，高可用，高性能），安全，存储，业务等等。主要精力放在java基础，设计模式，jvm原理，spring+springmvc原理及源码，linux，mysql事务隔离与锁机制，mongodb，http/tcp，多线程，分布式架构（dubbo，dubbox，spring cloud），弹性计算架构，微服务架构（springboot+zookeeper+docker+jenkins），java性能优化，以及相关的项目管理等等。

前端追求的是：页面表现，速度流畅，兼容性，用户体验等等。主要精力放在html5，css3，jquery，angularjs，bootstrap，reactjs，vuejs，webpack，less/sass，gulp，nodejs，V8引擎，javascript多线程，模块化，面向切面编程，设计模式，浏览器兼容性，性能优化等等。


## 强耦合的痛点

### 性能瓶颈

大多数项目在java后端都是分了三层，控制层（controller/action），业务层（service/manage），持久层（dao）。

正常的互联网架构，是都要拆开的，你的web服务器集群，你的应用服务器集群+文件服务器集群+数据库服务器集群+消息队列集群+缓存集群等等。

### jsp 痛点

1. 动态资源和静态资源全部耦合在一起，服务器压力大，一旦服务器出现状况，前后台一起玩完。
2. UI出设计后，前端将设计图切成html，再由后端将html套成jsp页面，出错率较高(因为页面中经常会出现大量js代码)，修改问题时需要双方协同开发，效率低下。
3. .jsp必须要在支持java的web服务器里运行，无法使用nginx等，性能提不上来。
4. 第一次请求jsp，必须要在web服务器中编译成servlet，第一次运行会较慢。
5. 每次请求jsp都是访问servlet再用输出流输出的html页面，效率没有直接使用html高（是每次哟，亲~）。
6. jsp内有较多标签和表达式，前端工程师在修改页面时会捉襟见肘，遇到很多痛点。
7. 如果jsp中的内容很多，页面响应会很慢，因为是同步加载。
8. 需要前端工程师使用java的ide，以及需要配置各种后端的开发环境，你们有考虑过前端工程师的感受吗。


## 前后端解耦

### 开发模式的改变

### 请求方式的改变


## 前后端分离的优势

1. 可以实现真正的前后端解耦，前端服务器使用 nginx。前端/WEB服务器放的是css，js，图片等静态资源(甚至还可以css，js)放到特定的文件服务器，前端服务器负责控制页面引用&跳转&路由，前端页面异步调用后端的接口，后端/应用服务器使用tomcat(可看成一个数据提供者)，加快整体响应速度。
2. 发现bug，可以快速定位是谁的问题，不会出现互相踢皮球的现象。
3. 在大并发情况下，我可以同时水平扩展前后端服务器。
4. nginx支持页面热部署，不用重启服务器，前端升级更无缝。
5. 增加代码的维护性&易读性（前后端耦在一起的代码读起来相当费劲）。
6. 提升开发效率，因为可以前后端并行开发，而不是像以前的强依赖。
7. 在nginx中部署证书，外网使用https访问，并且只开放443和80端口，其他端口一律关闭(防止黑客端口扫描)，内网使用http，性能和安全都有保障。
8. 前端大量的组件代码得以复用，组件化，提升开发效率，抽出来！


## 注意点

1. 这篇文章主要的目的是说jsp在大型外网java web项目中被淘汰掉，可没说jsp可以完全不学，对于一些学生朋友来说，jsp/servlet等相关的java web基础还是要掌握牢的，不然你以为springmvc这种框架是基于什么来写的？
2. 对于既可以前端做也可以后端做的逻辑，我建议是放到前端，为什么？因为你的逻辑需要计算资源进行计算，如果放到后端去run逻辑，则会消耗带宽&内存&cpu等等计算资源，你要记住一点就是服务端的计算资源是有限的，而如果放到前端，使用的是客户端的计算资源，这样你的服务端负载就会下降（高并发场景）。类似于数据校验这种，前后端都需要做！
