<style>
  td:first-child { color: red; }
</style>
<script>
ooboqoo.contentsRegExp = /H[123]/;  // 定义目录生成级别
</script>

# 基础语法

一个 Java 程序可以认为是一系列对象的集合，这些对象通过调用彼此的方法来协同工作。相关概念有：类、对象、方法、实例变量。

## 基本概念

### 基本语法

编写 Java 程序时，应注意以下几点：
  * 大小写敏感 - Java 是大小写敏感的
  * 类名 - 类名采用大驼峰式写法
  * 方法名 - 方法名采用小驼峰式写法
  * 源文件 - 源文件名必须和类名相同，文件名的后缀为 `.java`
  * 主方法入口 - 所有 Java 程序由 `public static void main(String []args)` 方法开始执行
  * 语句必须以 `;` 结尾，否则编译时报错

### 标识符

类名、变量名以及方法名都被称为标识符，关于标识符，有以下几点需要注意：
  * 所有的标识符都应该以字母 `A-Za-z`，美元符 `$`、或者下划线 `_` 开始
  * 首字符之后可以是字母 `A-Za-z`，美元符 `$`、下划线 `_` 或数字 `0-9` 的任何字符组合
  * 关键字不能用作标识符
  * 标识符是大小写敏感的

注：从 JDK 1.7 开始标识符开始支持中文，但实际开发中还是不要使用中文。

### 关键字

下面列出了 Java 保留字。这些保留字不能用于常量、变量、和任何标识符的名称。

```text
// 结构体
if else switch case break default
do while for continue
try catch finally throw

// 修饰符
default public protected static private  // 访问控制修饰符
abstract final strictfp                  // 非访问控制修饰符

// 类型
boolean byte short int long float double char enum

// 面向对象
class extends implements interface super new this

// 
package import instanceof assert return

// 未使用
goto const

// 陌生的关键字见下表
```

|||
|--------------|------------------------------------------------
| native       | 表示方法用非 java 代码实现
| strictfp     | 浮点数比较使用严格的规则
| synchronized | 表示同一时间只能由一个线程访问的代码块
| throws       | 定义方法可能抛出的异常
| transient    | 修饰不要序列化的字段
| void         | 标记方法不返回任何值
| volatile     | 标记字段可能会被多个线程同时访问，而不做同步

### 注释

Java 支持 单行注释、多行注释 以及 文档注释。

单行注释和文档注释会在编译时去掉，而文档注释会被解析成程序的正式文档，并能包含进如 javadoc 工具生成的文档里。

```java
/**
 * 文档注释
 */

/*
 * 多行注释
 */

// 单行注释
```

### 变量

变量是利用声明的方式，将内存中某个内存块保留下来以供程序使用。

所有的变量在使用前必须声明。声明变量的基本格式如下：

```text
type identifier [ = value][, identifier [= value] ...] ;
```

Java 语言支持的变量类型有：
  * 类变量：独立于方法之外的变量，用 static 修饰。
  * 实例变量：独立于方法之外的变量，不过没有 static 修饰。
  * 局部变量：类的方法中的变量。

### 常量

Java 中使用 `final` 关键字来修饰常量，为了便于识别，通常使用大写字母表示常量。

```java
final double PI = 3.1415927;
```

byte、int、long、和 short 都可以用十进制、16进制以及8进制的方式来表示。

```java
int decimal = 100;
int octal = 0144;
int hexa =  0x64;
```

和其他语言一样，Java 的字符串常量也是包含在两个引号之间的字符序列。字符串常量和字符常量都可以包含任何 Unicode 字符。

```java
char a = '\u0001';
String a = "\u0001";
```

Java 语言支持一些特殊的转义字符序列。

|||
|----|----------
| \n | 换行 (0x0a)
| \r | 回车 (0x0d)
| \f | 换页符(0x0c)
| \b | 退格 (0x08)
| \s | 空格 (0x20)
| \t | 制表符
| \" | 双引号
| \' | 单引号
| \\\\ | 反斜杠
| \ddd   | 八进制字符 (ddd)
| \uxxxx | 16进制 Unicode 字符 (xxxx)


## 基本数据类型

基本数据类型不涉及内存分配问题，而引用数据类型需要由开发者为其分配空间。

### 内置数据类型

Java 语言提供了八种基本类型。六种数字类型（四个整数型，两个浮点型），一种字符类型，还有一种布尔型。

| 数据类型      | 大小/位 |  数据范围          | 默认值 | 备注 
|---------------|---------|--------------------|--------|----------------------------------
| byte 字节     |     8   | -128  ~ 127        |    0   | 有符号的，以二进制补码表示的整数
| short 短整型  |    16   | -2^15 ~ 2^15-1     |    0   | 有符号的以二进制补码表示的整数
| int 整型      |    32   | -2^31 ~ 2^31-1     |    0   | 有符号的以二进制补码表示的整数
| long 长整型   |    64   | -2^64 ~ 2^64-1     |    0   | 有符号的以二进制补码表示的整数
| float 单精度  |    32   | -3.4E38 ~ 3.4E38   |   0.0  | 单精度、符合 IEEE754 标准的浮点数
| double 双精度 |    64   | -1.7E308 ~ 1.7E308 |   0.0  | 双精度、符合 IEEE754 标准的浮点数
| char 字符     |    16   | 0 ~ 255            |'\u0000'| 单个 Unicode 字符
| boolean 布尔  |    -    | true 或 false      | false  | ||

注1: 浮点数不能用来表示精确的值，如货币  
注2: 对于数字类型，整数默认是 int 小数默认是 double，直接用默认就好，因为现在硬件资源便宜，像 short float 已很少使用。  
注3: 实际上，JAVA 中还存在一种基本类型 `void`，它也有对应的包装类 java.lang.Void，不过我们无法直接对它进行操作。  
注4: String 类型属于引用类型。

#### 整型

* long 数值带后缀 `L` 或 `l`
* 十六进制数值有前缀 `0x` 或 `0X`
* 八进制带前缀 `0` 但这种表示法容易让人混淆，尽量避免
* 二进制带前缀 `0b` 或 `0B`

注意，Java 没有无符号 unsigned 形式的 int long short 或 byte

```java
// 数据类型溢出
int max = Interger.MAX_VALUE;  // 2147483647
System.out.print(max + 1);     // -2147483648

// 计算结果与直观期望不符
System.out.println(9 / 5);     // 结果是 1 而不是 1.8
```

#### 浮点类型

double 数值的精度是 float 类型的两倍，随着硬件成本的降低，开发一般都用 double。

float 数值须带后缀 `f` 或 `F`，double 是默认的，当然也可以加后缀 `d` 或 `D`

```java
// 计算结果与直观期望不符
System.out.println(10.2 * 10.2);  // 结果是 104.039999 而不是 104.04
```

#### 字符型 char

程序中使用单引号 `'` 声明的内容称为字符，每一对单引号里面只能保存一位字符。

在 Java 中英文和中文都统一使用 UNICODE 编码。

```java
char c = 'A';
int num = c;   // 字符可以和 int 互相转换(以编码形式出现)
c= '王'
num = c;       // 29579 即 \u738B

// 一些常用编码范围
'A' 65  ~  'Z' 90
'a' 97  ~  'z' 122
'0' 48  ~  '9' 57
```

##### Unicode 转义字符的使用

```java
public class Example014 {
    public static void main(String[] args) {
    /**
    * it is a test for \utest.                                    // 编译报错 [分析1]
    */
    // \u0022 是双引号的 Unicode 转义字符
    System.out.println("a\u0022.length() + \u0022b".length());    // 输出 2 [分析2]
  }
}
```

分析1: Java 允许在注释以及代码中使用 `\u` 开头的 Unicode 转义字符，但要求转义必须有效，否则编译报错。  
分析2: Java 对在字符串字面常量中的 Unicode 转义字符没有提供任何特殊处理。编译器在将程序解析成各种符号之前，先将 Unicode 转义字符转换成为它们所表示的字符。

#### 布尔型

George Boole 是19世纪重要的数学家之一。

Java 里面不允许使用 0 或 1 来填充布尔型变量的内容。

### 引用类型

在 Java 中，引用类型的变量非常类似于 C/C++ 的指针。引用类型指向一个对象，指向对象的变量是引用变量。这些变量在声明时被指定为一个特定的类型，比如 Employee、Puppy 等。变量一旦声明后，类型就不能被改变了。

对象、数组都是引用数据类型。

所有引用类型的默认值都是 `null`。

一个引用变量可以用来引用任何与之兼容的类型。

```java
Site site = new Site("Runoob");
```

### 类型转换

整型、实型（常量）、字符型数据可以混合运算。运算中，不同类型的数据先转化为同一类型，然后进行运算。

数据类型转换必须满足如下规则：

1. 不能对 boolean 类型进行类型转换。
2. 不能把对象类型转换成不相关类的对象。
3. 在把容量大的类型转换为容量小的类型时必须使用强制类型转换。
4. 转换过程中可能导致溢出或损失精度，例如：(byte) 188 == -68
5. 浮点数到整数的转换是通过舍弃小数得到，而不是四舍五入，例如：(int)-45.89f == -45

#### 自动类型转换

必须满足转换前的数据类型的位数要低于转换后的数据类型

#### 强制类型转换

条件是转换的数据类型必须是兼容的，格式 `(type) value`

```java
// 强制类型转换的类型溢出问题
int num = 130;
byte x = (byte) num;  // x = -126
```

#### 隐含强制类型转换

整数的默认类型是 int。浮点型不存在这种情况，因为在定义 float 类型时必须在数字后面跟上 F 或者 f。

```java
byte num = 100;
```


## 修饰符

### 访问控制修饰符

| 修饰符    | 当前类 | 同一包内 | 子孙类 | 其他包 |
|-----------|:------:|:--------:|:------:|:------:|
| public    |    Y   |     Y    |    Y   |    Y   |
| protected |    Y   |     Y    |    Y   |    N   |
| default   |    Y   |     Y    |    N   |    N   |
| private   |    Y   |     N    |    N   |    N   |

### 非访问修饰符

`static` 用来创建类方法和类变量。  
`final` 用来修饰类、方法和变量，final 修饰的类不能够被继承，修饰的方法不能被继承类重新定义，修饰的变量为常量。  
`abstract` 用来创建抽象类和抽象方法。  
`synchronized` 和 `volatile` 修饰符，主要用于线程的编程。


## 运算符

计算机的最基本用途之一就是执行数学运算，Java 提供了一套丰富的运算符来操纵变量。

|||
|------------|----------------------------------------
| 算术运算符 | `+` `-` `*` `/` `%` `++` `--`
| 关系运算符 | `==` `!=` `>` `<` `>=` `<=`
| 位运算符   | `&` <code>&#124;</code> `^` `~` `<<` `>>` `>>>`
| 逻辑运算符 | `&&` <code>&#124;&#124;</code> `!`
| 赋值运算符 | `=` `+=` `-=` `/=` `%=` 位赋值运算符：`<<=` `>>=` `&=` `^=` <code>&#124;=</code>
| 其他运算符 | `? :` `instanceof`

### 运算符优先级

| 类别 |      操作符       | 关联性
|------|-------------------|-----------------
| 后缀 | `()` `[]` `.`     | 左到右
| 一元 | `+` `-` `!` `~`   | 右到左
| 乘性 | `*` `/` `%`       | 左到右
| 加性 | `+` `-`           | 左到右
| 移位 | `>>` `>>>` `<<`   | 左到右
| 关系 | `>` `>=` `<` `<=` | 左到右
| 相等 | `==` `!=`         | 左到右
| 按位与   | `&`           | 左到右
| 按位异或 | `^`           | 左到右
| 按位或   | <code>&#124;</code> | 左到右
| 逻辑与   | `&&`          | 左到右
| 逻辑或   | <code>&#124;&#124;</code> | 左到右
| 条件     |  `? :`        | 右到左
| 赋值 | `=` `+=` `-=` `*=` `/=` `%=` `>>=` `<<=` `&=` `^=` <code>&#124;=</code> | 右到左
| 逗号 | `,`               | 左到右


## 循环结构

```java
while ( 布尔表达式 ) {
  //循环内容
}

do {
  //代码语句
} while (布尔表达式);

for(初始化; 布尔表达式; 更新) {
  //代码语句
}

// Java5 引入了一种主要用于数组的增强型 for 循环。
for(声明语句 : 表达式)
{
   //代码句子
}

// break 用于终止循环
// continue 用于跳过本次循环，直接进入下一轮循环 
```

```java
public class Test {
    public static void main(String args[]) {
        int[] numbers = {10, 20, 30, 40, 50};

        for (int x : numbers) {
            System.out.print(x);
            System.out.print(",");
        }
        System.out.print("\n");
        String[] names = {"James", "Larry", "Tom", "Lacy"};
        for (String name : names) {
            System.out.print(name);
            System.out.print(",");
        }
    }
}
```


## 分支结构

```java
if (布尔表达式 1) {
   // 如果布尔表达式 1的值为 true 执行代码
} else if (布尔表达式 2) {
   // 如果布尔表达式 2的值为 true 执行代码
} else if (布尔表达式 3) {
   // 如果布尔表达式 3的值为 true 执行代码
} else {
   // 如果以上布尔表达式都不为 true 执行代码
}

switch (expression) {
    case value:
       // 语句
       break;  // 可选
    case value:
       // 语句
       break;  // 可选
    // 你可以有任意数量的 case 语句
    default:  // 可选
       // 语句
}
```


## 方法

在前面几个章节中我们经常使用到 `System.out.println()`，那么它是什么呢？`println()` 是一个方法，`System` 是系统类，`out` 是标准输出对象。这句话的用法是调用系统类 System 中的标准输出对象 out 中的方法 println()。

### 方法的定义

```text
修饰符 返回值类型 方法名(参数类型 参数名) {
    ...
    方法体
    ...
    return 返回值;
}
```

```java
static float interest(float principal, int year){...}
```

### 方法调用 和 void

### 方法的重载

方法重载就是一个类的两个方法拥有相同的名字，但是有不同的参数列表。Java 编译器根据方法签名判断哪个方法应该被调用。
方法重载可以让程序更清晰易读。执行密切相关任务的方法应该使用相同的名字。
重载的方法必须拥有不同的参数列表。你不能仅仅依据修饰符或者返回类型的不同来重载方法。

### 变量作用域

局部变量必须声明才可以使用。
方法的参数范围涵盖整个方法。参数实际上是一个局部变量。
for循环的初始化部分声明的变量，其作用范围在整个循环。

### 命令行参数的使用

```java
public class CommandLine {
   public static void main(String args[]) { 
      for (int i=0; i<args.length; i++) {
         System.out.println("args[" + i + "]: " + args[i]);
      }
   }
}
```

### 构造方法

当一个对象被创建时候，构造方法用来初始化该对象。构造方法和它所在类的名字相同，但构造方法没有返回值。

### 可变参数

JDK 1.5 开始，Java支持传递同类型的可变参数给一个方法。在方法声明中，在指定参数类型后加一个省略号(...) 。
一个方法中只能指定一个可变参数，它必须是方法的最后一个参数。任何普通的参数必须在它之前声明。

```java
public static void printMax(double... numbers) {
    if (numbers.length == 0) {
        System.out.println("No argument passed");
        return;
    }
    // ...
    System.out.println("The max value is " + result);
}
```

### finalize() 方法

Java 允许定义这样的方法，它在对象被垃圾收集器析构(回收)之前调用，这个方法叫做 finalize( )，它用来清除回收对象。



