# 数据可视化基础


## D3 简介

D3 的全称是 Data-Driven Document，直译为 "数据驱动的文档"。我们可以将 Data-Driven 通俗地理解为 **由数据来决定绘图流程的程序设计模型**。而文档指的是文档对象模型 DOM。

将数据变成图形，要想用原生的 HTML SVG Canvas 来实现是繁琐和困难的。D3 为我们封装好这些，让开发者能更注重图表的布局和逻辑。

### D3 的优势

> D3 就像是 Photoshop，而其他库则是 Windows画板。前者需要一定的时间学习，学成后在图像处理方面所向披靡；后者基本不需要学习，会和不会没太大的区别。

Highcharts Echarts Chart.js 可以看作一类，共同的特点是封装层次很高，能够非常简单地制作图表，但是给予开发者控制和设计的空间较少。

封装层次太高自然会失去部分自由，但太低又会使程序过长，D3在这一点上取得了平衡。
  * 相对比较底层，但是又使代码足够简洁
  * 更像数学库，但又为绘图提供了支持
  * 封装了很多操作，但又在开发者渴望控制的地方给予了足够的自由

从功能和特性上，D3 的优势体现在：

#### 数据与元素捆绑

D3 能够将数据与 DOM 绑定在一起，是数据与图表成为一个整体。图形元素的 DOM 里含有数据，当数据更新时，图形的重绘易于实现。

#### 计算和绘图相互独立

将数据变成图表，可分为两步：计算和绘图。计算是指算出节点的位置、线段的端点、弧线的角度等；绘图是将计算所得的节点、线段等元素绘制在网页上。

在 Highcharts 等可视化库中，计算和绘图是一个整体，输入数据直接出图。而 D3 则需要两步，如画一个饼图时，需要先将原始数据转换成饼图的弧线，然后再进行绘制。

```js
var data;
// Highcharts 一步出图
drawPie(data);
// D3 要两步
var grapj = computePie(data);
drawPie(graph);
```

看起来，D3 好像使问题变麻烦了，但是，在可视化设计比较复杂是，计算和绘图封装成一个整体的形式往往难以调整和操作细节，将两者分开则极大地提高了自由度。

#### 链式语法

#### 强大的图形计算能力

D3 的 **布局** 封装了饼状图、树图、打包图等11种图的算法；**比例尺** 提供了线性、指数、序数等多种关于对应关系的计算；**地图** 为路径、投影、球面数学、网格的计算提供了方便。

#### 同时支持 SVG 和 Canvas

### D3 的适用范围

Ben Fry 在他的著作 *Visualizing Data* 中将数据可视化的过程分为七个步骤
  * 获取 Acquire
  * 分析 Parse
  * 过滤 Filter
  * 挖掘 Mine
  * 表现 Represent
  * 改善 Refine
  * 交互 Interact

前四个步骤分别属于数据采集、数据分析、数据处理、数据挖掘领域，不属于 D3 的适用范围。数据可视化的处理范围是最后三步。


## 数据可视化是什么

今年，随着大数据时代的到来，数据可视化作为大量数据的呈现方式，称为当前重要的课题。

数据可视化的目的，是要对数据进行可视化处理，以使得能够明确地、有效地传递信息 ———— Vitaly Friedman。

人类大脑对于图的认知远比文字、数字更快。

信息可视化是对数字信息和非数字进行可视化，而数据可视化仅限于对数字进行可视化。

表现数据的方式很多，其中有一些共通的视觉要素：坐标、大小、色彩、标签、关联 等。


## 图表种类

数据可视化是用图表来表现数据，随着设计师的能力高低，图的样式自然千差万别。但是不是说只要是图，就很容易理解。有时候图比数据本身还难理解，这种情况可以认为设计是失败的。有一些图，经过长期使用，能够被大多数人理解，将它们分类后称为图表。

#### 柱形图

#### 散点图

#### 折线图

折线图的目的与柱形图类似，也适合表示在二维数据集中，某一维相对于另一维的变化趋势，不同的是：
  * 折线图比较适合连续的数据，柱形图较适合离散的数据
  * 折线图较适合大量的数据，柱形图较适合少量的数据
  * 折线图用于表示多个数据集之间的比较时，效果较好

#### 饼状图

饼状图可以用于比较数值的大小，但是有一个缺点：如果数值之间差距不大，肉眼很难分辨。因此，最好用于表示某一个值占全体值的百分比。

#### 弦图

弦图用于表示节点之间的联系。两点之间的连线表示哪两个节点具有联系，线的粗细表示权重。

#### 力导向图

力导向图适合描述大量节点之间的关系，各节点之间具有相互作用力。

#### 树图


## 学习方法

在网络时代学习编程是不需要记忆很多内容的。学习信息技术，指的是你要学会采集信息、过滤信息、处理信息、表现信息。换句话说，不需要记住，只要会查就好。

建议按如下顺序学习：
  1. 学习 HTML CSS JS
  2. 用 D3 绘制饼状图、柱形图、折线图、散点图四种基本图形
  3. 掌握 SVG Canvas 绘制基本图形元素的方法
  4. 学会用 D3 的比例尺
  5. 学会 D3 的布局和地图
  6. 学习配色、图的布局等设计知识
