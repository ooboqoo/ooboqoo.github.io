# HTTP/1.1

HTTP/1.1 http://www.ietf.org/rfc/rfc2616.txt  

构建WWW的三项技术：
  * 文本标记语言HTML(HyperText Markup Language, 超文本标记语言)
  * 文档传输协议HTTP(HyperText Transfer Protocol, 超文本传输协议)
  * 指定文档所在地址的URL(Uniform Resource Locator, 统一资源定位符)


## 网络基础 TCP/IP

互联网是在 TCP/IP 协议族的基础上运作的，HTTP属于它内部的一个子集。

计算机与网络设备要相互通信，双方就必须基于相同的方法，比如，如何探测到通信目标、由哪一边先发起通信、使用哪种语言进行通信、怎样结束通信等规则都需要事先确定。不同的硬件、操作系统之间的通信，所有的这一切都需要一种规则，我们把这种规则称为协议。协议中存在各式各样的内容，从电缆的规格到IP地址的选定方法、寻找异地用户的方法、双方建立通信的顺序，以及Web页面显示需要处理的步骤，等等。像这样把与互联网相关联的协议集合起来总称为TCP/IP。也有说法认为，TCP/IP是指TCP和IP这两种协议。还有一种说法认为，TCP/IP是在IP协议的通信过程中，使用到的协议族的统称。

### TCP/IP 的分层管理

TCP/IP 协议族按层次分别分为4层：应用层、传输层、网络层和数据链路层。

把 TCP/IP 层次化是有好处的。比如，某个地方需要改变设计时，只需把变动的层替换掉即可。把各层之间的接口部分规划好之后，每个层次内部的设计就能够自由改动了。层次化之后，设计也变得相对简单了。处于应用层上的应用可以只考虑分派给自己的任务，而不需要弄清对方在地球上哪个地方、对方的传输路线是怎样的、是否能确保传输送达等问题。

**应用层**决定了向用户提供应用服务时通信的活动。FTP DNS HTTP 都处于该层。

**传输层**提供处于网络连接中的两台计算机之间的数据传输。在传输层有两个性质不同的协议：TCP(Transmission Control Protocol，传输控制协议)和 UDP(User Data Protocol，用户数据报协议)。

**网络层**用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。该层规定了通过怎样的路径(传输路线)到达对方计算机。网络层所起的作用就是在众多的选项内选择一条传输路线。

**链路层**(又名数据链路层，网络接口层)用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、网络适配器，及光纤等物理可见部分。硬件上的范畴均在链路层的作用范围之内。

### TCP/IP 通信传输流

```text
          应用层               传输层    网络层           链路层
客户端： HTTP客户端 <-HTTP报文-> TCP <---> IP <-IP数据包-> 网络 <---┐
服务器： HTTP服务器 <-HTTP报文-> TCP <---> IP <-IP数据包-> 网络 <---┘
```

我们用HTTP举例，首先客户端在应用层(HTTP协议)发出一个想看某个Web页面的HTTP请求。接着，为了传输方便，在传输层(TCP协议)把从应用层收到的数据(HTTP请求报文)进行分割，并在各个报文上打上标记序号及端口号后转发给网络层。在网络层(IP协议)，增加作为通信目的地的MAC地址后转发给链路层。这样发往网络的通信请求就准备齐全了。接收端的服务器在链路层接收到数据，按序往上层发送，一直到应用层。当传输到应用层，才能算真正接收到由客户端发送过来的HTTP请求。

发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的 head 信息。反之，接收端在层与层传输数据时，每经过一层时会把对应的 head 消去。

### 负责传输的 IP 协议

IP 协议的作用是把各种数据包传送给对方。而要保证确实传送到对方那里，则需要满足各类条件。其中两个重要的条件是 IP 地址和 MAC 地址(Media Access ControlAddress)。

ARP 是一种用以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址。

没有人能够全面掌握互联网中的传输状况在到达通信目标前的中转过程中，那些计算机和路由器等网络设备只能获悉很粗略的传输路线。这种机制称为路由选择(routing)。

### 确保可靠性的 TCP 协议

TCP提供可靠的字节流服务。所谓的字节流服务(Byte Stream Service)是指，为了方便传输，将大块数据分割成以报文段(segment)为单位的数据包进行管理。而可靠的传输服务是指，能够把数据准确可靠地传给对方。一言以蔽之，TCP协议为了更容易传送大数据才把数据分割，而且TCP协议能够确认数据最终是否送达到对方。

为了准确无误地将数据送达目标处，TCP协议采用了三次握手(three-way handshaking)策略。用TCP协议把数据包送出去后，不会对传送后的情况置之不理，它一定会向对方确认是否成功送达。握手过程中使用了TCP的标志(flag) —— SYN(synchronize) 和 ACK(acknowledgement)。

发送端首先发送一个带 **SYN** 标志的数据包给对方。接收端收到后，回传一个带有 **SYN/ACK** 标志的数据包以示传达确认信息。最后，发送端再回传一个带 **ACK** 标志的数据包，代表握手结束。若在握手过程中某个阶段莫名中断，TCP协议会再次以相同的顺序发送相同的数据包。除了上述三次握手，TCP 协议还有其他各种手段来保证通信的可靠性。

### 负责域名解析的 DNS 服务

DNS(Domain Name System)服务是和 HTTP 协议一样位于应用层的协议。它提供域名到 IP 地址之间的解析服务。


## 简单的HTTP协议






## HTTP报文内的HTTP信息


## 返回结果的HTTP状态码


## 与HTTP协作的Web服务器


## HTTP报头


## 确保Web安全的HTTPS


## 确认访问用户身份的认证



## 基于HTTP功能追加协议


## 构建Web内容的技术


## Web的攻击技术



