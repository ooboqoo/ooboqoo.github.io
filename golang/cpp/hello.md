# C 语言简明教程

<script>ooboqoo.contentsRegExp = /H[123]/;</script>


## 初识C语言

```c
#include <stdio.h>

int main()
{
  printf("Hello World");
  return 0;
}
```

#### 程序结构

简单来说，一个C程序就是由若干头文件和函数组成。

`#include <stdio.h>` 是一条预处理命令，即通知C语言编译系统在正式编译之前需做一些预处理工作。

函数就是实现代码逻辑的一个小的单元。

C程序就是执行主函数 main 里的代码，也可以说这个主函数就是C语言中的唯一入口。在最新的C标准中，main 函数前的类型为 int 而不是 void。

#### 注释

```c
/* 多行注释 */
// 单行注释
```

#### 标识符

标识符可以是字母 `A-Za-z`、数字 `0-9`、下划线 `_` 组成的字符串，并且第一个字符必须是字母或下划线。

在使用标识符时还有注意以下几点：
  * 标识符的长度最好不要超过8位，因为在某些版本中规定标识符前8位有效，当两个标识符前8位相同时会认为是同一个标识符。
  * 标识符是严格区分大小写的。
  * 标识符不能是C语言的关键字。

#### 变量及赋值

```c
int a,b;
a = 1;
b = 2;
int num = 10;
printf("%d\n", a + b + num);
```


## 数据类型

#### 数据类型

C语言中，数据类型可分为：基本数据类型，构造数据类型，指针类型，空类型四大类。

整型 `int` 字符型 `char` 单精度浮点型 `float` 双精度浮点型 `double`

C语言中不存在字符串变量，字符串只能存在字符数组中。

#### 格式化输出语句

格式化输出语句，也可以说是占位输出，是将各种类型的数据按照格式化后的类型及指定的位置进行显示。

```c
// 格式: printf("输出格式符", 输出项);
printf("整数 %d 小数 %f 字符 %c 字符串 %s", 1, 3.45, 'a', "str");
```

#### 常量

在程序执行过程中，值不发生改变的量称为常量。C语言的常量可以分为直接常量和符号常量。

**直接常量**也称为**字面量**，是可以直接拿来使用，无需说明的量。
  * 整型常量 `13` `0` `-13`
  * 实型常量 `13.33` `-24.4`
  * 字符常量 `'a'` `'M'`
  * 字符串常量 `"I love imooc!"`

**符号常量**在使用之前必须先定义，其一般形式为： `#define 标识符 常量值`。符号常量的标示符一般习惯使用大写字母，变量的标示符一般习惯使用小写字母，加以区分。

```c
#define PI 3.14;
```

#### 自动类型转换

自动转换发生在不同数据类型运算时，在编译的时候自动完成。

字节小的可以向字节大的自动转换: `char` -> `int` -> `double`

#### 强制类型转换

强制类型转换是通过定义类型转换运算来实现的。其一般形式为： `(数据类型) (表达式)` 

在使用强制转换时应注意以下问题：
  * 数据类型和表达式都必须加括号，如把 `(int)(x/2+y)` 写成 (int)x/2+y 则成了把 x 转换成 int 型之后再除 2 再与 y 相加了。
  * 转换后不会改变原数据的类型及变量值，只在本次运算中临时性转换。
  * 强制转换后的运算结果不遵循四舍五入原则。

```c
printf("2.55取整后为%d\n", (int)2.55);
```


## 运算符

#### 算术运算符

`+` `-` `*` `/` `%` `++` `--`

```c
printf("%d\n", 5 / 2);  // 2        // 如果相除的两个数都是整数，则结果也为整数，小数部分省略
printf("%d\n", 5.1 % 3);  // error  // 只能对整数进行取余运算
printf("%d\n", -10 % 3);  // -1     // 取余运算后的符号取决于被模数的符号
printf("%d\n", 10 % -3);  // 1
```

#### 赋值运算符

赋值运算符分为**简单赋值运算符**和**复合赋值运算符**。复合赋值运算符由简单赋值符 `=` 加其它运算符构成 `+=` `-=` `*=` `/=` `%=`。

#### 关系运算符

`>` `>=` `<` `<=` `==` `!=`

关系表达式的值是“真”和“假”，在C程序用整数 `1` 和 `0` 表示。

```c
printf("%d\n", 3 < 4);  // 1
printf("%d\n", 3 == 4); // 0
```

#### 逻辑运算符

`&&` `||` `!`

#### 三目运算符

```c
printf("%s", 4 >= 3 ? "yes" : "no");
```

#### 运算符优先级

||
|----|-------------------------------
| 1  | `()`
| 2  | `!` `+` (正号) `-` (负号) `++` `--`
| 3  | `*` `/` `%`
| 4  | `+` (加) `-` (减)
| 5  | `<` `<=` `>=` `>`
| 6  | `==` `!=`
| 7  | `&&`
| 8  | <code>&#124;&#124;</code>
| 9  | `? :`
| 10 | `=` `+=` `-=` `*=` `/=` `%=`


## 语句结构

#### 条件

```c
if (表达式1)
{
  代码块1;
}
else if (表达式2) {
  代码块2;
}
else
{
  代码块3;
}
```

```c
switch(表达式)
{
  case 常量表达式1:
    代码块1;
    break;
  case 常量表达式2:
    代码块2;
    break;
  default:
    代码块3;
}
```

在使用switch语句时还应注意以下几点：
  * 在 case 后的各常量表达式的值不能相同，否则会报错
  * 在 case 子句后如果没有 `break;` 会一直往后执行一直到遇到 `break;`
  * switch 后面的表达式语句只能是整型或者字符类型
  * 在 case 后，允许有多个语句，可以不用 `{}` 括起来
  * 各 case 和 default 子句的先后顺序可以变动，而不会影响程序执行结果
  * default 子句可以省略不用

```c
switch (i) {
  default:
    printf("default 位置可以随便放，当然正常应该放最后");
    break;
  case 33:
    printf("OK");
}
```

#### 循环

```c
while(表达式)
{
  代码块;
}

do
{
  代码块;
}
while (表达式);

for (表达式1; 表达式2; 表达式3)
{
  代码块;
}

break;    // 跳出当前整个循环
continue; // 结束本次循环开始下一次循环

```

`for` 结构的相关说明
  * 表达式1 和 表达式3 可以是一个简单表达式也可以是多个表达式以逗号分割
  * 表达式2 一般是关系表达式或逻辑表达式，但也可以是数值表达式或字符表达式，只要其值非零，就执行循环体。
  * 各表达式中的变量一定要在 for 循环之前定义

```c
while (i < 5) printf("%d", i++);

int i;
for (i = 1; i < 10; i++)
{
  printf("%d", i)
}
```

#### goto

goto 语句是一种无条件分支语句，使用格式为 `goto 语句标号;` 其中语句标号是一个标识符，该标识符一般用英文大写并遵守标识符命名规则，这个标识符加上一个 `:` 一起出现在函数内某处，执行 goto 语句后，程序将跳转到该标号处并执行其后的语句。

goto 语句通常不用，主要因为它将使程序层次不清，且不易读，但在特定情况下，可以使用 goto 语句来提高程序的执行速度。

```c
int main()
{
  int sum = 0, i = i;
LOOP:
  if (i <= 10)
  {
    sum += i++;
    goto LOOP;
  }
  printf("sum=%d\n", sum);
  return 0;
}
```


## 函数


## 数组

