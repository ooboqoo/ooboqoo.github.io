# 重构：改善既有代码的设计


《重构》的意义不只在于指导代码重构，更在于让人从一开始就知道什么是好的代码

重构就是不改变外在行为而提高代码质量，先做对再做好。

《重构》传达的核心理念是，代码会随时间流逝而烂掉。

识别坏味道、测试先行、行为保持的变更动作，是重构的基本功。

王健在开展大型的架构重构时总结的十六字心法：旧的不变，新的创建，一步切换，旧的再间，

在很多重构(如常见的改变函数声明)的做法中，Fowler 会引入(很快就会再次修改甚至删除的)临时元素，，这些临时元素所代表的，是对变更过程(而非只是结果)的设计。

刻意练习的三大要素：重复、学习区、反馈。

代码被阅读和修改的次数远远多于它被编写的次数。保持代码易读、易修改的关键，就是重构——对框架而言如此，对一般软件也如此。

设计模式为重构提供了目标。然而确定目标只是问题的一部分而已，改造程序以达到目标是另一个难题。

保证每次只走一步。

(顾问建议重构，项目经理因工期拒绝)，6 个月之后这个项目宣告失败，很大的原因是代码太复杂，无法调试，也无法将性能调优到可接受的水平。

本质上说，重构就是在代码写好之后改进它的设计。

大部分人相信应该先设计而后编码，但随着时间的流逝，人们不断修改代码，于是原有整体结构逐渐衰弱，代码质量慢慢沉沦。
重构正好相反。聚沙成塔，这些小小的修改累积起来就可以根本改善设计质量。

本书的目的是告诉你如何以一种可控且高效的方式进行重构。你将学会如何有条不紊地改进程序结构，且不会引入错误，这就是正确的重构方式。

这份重构名录的源头是 20 世纪 90 年代后期我开始学习重构时的笔记，直到今天我仍然不时查阅这些笔记，作为对我不甚可靠的记忆力的补充。









## 1. 重构示例

我再强调一次，是需求的变化使重构变得必要。如果一段代码能正常工作，并且不会再被修改，那么完全可以不去重构它。能改进之当然很好，但若没人需要去理解它，它就不会真正妨碍什么。

重构第一步：确保即将修改的代码拥有一组可靠的测试




## 2. 重构的原则


## 3. 代码的坏味道


## 4. 构筑测试体系


## 5. 介绍重构名录


## 6. 第一组重构


## 7. 封装


## 8. 搬移特性


## 9. 重新组织数据


## 10. 简化条件逻辑


## 11. 重构 API


## 12. 处理继承关系





























