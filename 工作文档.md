# 工作交接信息


## PC 端


### 程序树节点属性

此部分注意点罗列如下：

1. “路点” 中设置参考坐标系和参考坐标系的定位点时，如果跟其他路点冲突，需要先清除冲突
2. “路点” 部分，坐标系转换比较复杂，请仔细研读代码，弄懂后再改
3. “设置” 部分，界面会根据选择项变化，请先在软件界面测试各功能，有个了解后再修改代码

#### 相关资源

1. 节点属性详细定义文档在 `doc.qixing-group.com` 仓库的 `program-prop.md` 文档
2. 属性值的单位，在 PC软件处有显示，后续更新以 `doc.qixing-group.com` 仓库的 `ui与主控通信协议.md` 文档内容为准
3. 代码文件位于 `src\app\toolbar\program`


### 参数设置

参数设置，目前实现与手机端不同，只使用一个参数文档，此部分应该会更新到跟手机端一样，具体待确认。

#### 代码完成情况

参数设置，目前功能完整实现的有以下几部分：

1. 基础参数 -> 设备参数
2. 安全参数 -> 一般限制
3. 安全参数 -> 关节限制

仅实现了界面的，只有 “I/O 参数” 部分。其他类目都没有实现。

#### 相关资源

1. 具体参数设置项描述文档参看 `doc.qixing-group.com` 仓库的 `ui与主控通信协议.md`
2. 代码中具体实现的类型定义在 `service.qixing-group.com` 仓库
3. PC 端相关代码文件位于 `src\app\parameter`


### 用户管理

流程描述：

1. 首次打开软件，跳过图片轮播后出现登录窗口
2. 用户输入用户名、密码后，点击登录按钮登录
3. 服务器验证通过后，返回的 header 中的 `Authorization` 字段会包含一个 token，将此 token 保留本地，后续所有跟服务器的通讯皆需使用此信息
4. 服务器验证通过后，同时会返回该用户的详细信息，也需要保留本地供后续使用
5. 在登入主界面前，还需下载所有设备授权证书信息并保留本地，供后续调用，下载失败不予使用
6. 下载完设备授权证书后，还需下载程序列表（此部分目前有项文俊实现）
7. 登入主界面，开始正常使用
8. 完成首次登录后，下次自动登入主界面
9. 用户点击右上角用户头像，跳出用户信息界面
10. 用户点击退出登录，清理完本地保存的数据后，跳转到登录界面


#### 相关资源

1. 相关云端接口定义在 `doc.qixing-group.com` 仓库的 `cloud-v2.1.md`
2. 代码文件 `src\app\user` `src\app\common\user.service.ts` `src\app\common\license.service.ts`


### 自动升级

此部分代码仅适用于原 CEF 环境，已经实现以下功能：

1. 自动升级流程能跑通
2. 能够区分是否是强制升级，并更改相应升级逻辑和行为

源代码位置：`src\app\upgrade`

此部分代码不适用于现有 Electron 环境，后续可考虑完全废弃此部分代码，或者仅利用其中的一些界面。


### 终端

终端目前完成了一下功能：

1. 支持其他模块调用终端来实现信息输出
2. 支持其他模块向终端注册命令，供用户在终端中输入命令执行命令指定功能
3. 可点击终端最左侧图标实现终端窗口展开/折叠, 另外终端实现了拖动调节终端窗口大小的功能

终端采用了 `angular.qixing-group.com` 组件库的 `terminal` 组件，此组件实现地很简单，后续需要根据需求进行完善。



## 手机端


### 文档管理



### 参数设置



### 用户管理


### 自动版本升级





