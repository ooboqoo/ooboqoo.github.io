# JavaScript Patterns

## 简介

目录：

* 模式
* JS 基本概念
* ES5
* JSLint
* Console

在软件开发中，模式是指一个通用问题的解决方案。

ES5 增加了严格模式，该模式实际上是从 JS 语言中移除了一些特性，使得程序更为简洁和不易出错。

## 基本技巧

目录

* 编写可维护代码
* 尽量少用全局变量
* for 循环
* for-in 循环
* 不要增加内置的原型
* switch 模式
* 避免使用隐式类型转换，比较语句使用 `===` `!==` 操作符
* 避免使用 `eval()`，会带来安全隐患，并可能影响当前执行环境。必要时可考虑用 `new Function()` 代替。 另外，通过 `setInterval()` `setTimeout()` 和 `function()` 等构造函数来传递参数也有类似隐患。
* 使用 parseInt() 的数值约定，在现代代码中，应该使用 ES6 的 `Number.parseInt()` 避免解析歧义。
* 编码约定，确定编码约定往往会引发激烈讨论，但确定并一致遵循约定比约定内容本身更为重要。
* 命名约定
* 编写注释
* 编写 API 文档，通过 JSDoc 自动生成文档。
* 编写可读性强的代码
* 同行互查(代码评审)可以使得审查人和代码编写者可以交换和共享知识。
* 在正式发布时精简代码，利用工具精简脚本可以大大缩小代码体积，加速页面载入速度(提升页面性能)。
* 运行 JSLint
* 小结

### 尽量少用全局变量

后面我们会研究最小化全局变量的数量的方法，如命名空间模式或自执行立即生效函数。

不使用 `var` 创建的隐含全局变量可以通过 `delete` 操作符删除，这表明隐含全局变量严格来讲不是真正的变量，而是全局对象的属性。属性可以通过 `delete` 操作符删除，但变量不可以。

在 ES5 严格模式中，为没有声明的变量赋值会抛出错误。

### 单 `var` 模式

变量提升：

```js
myname = "global";
function func() {
  console.log(myname);   // undefined 注意不是 global
  var myname = "local";
  console.log(myname);   // local
}
```

实际上 ES 标准中并有没 "提升" 这一说法，实际涉及到执行链和变量查找，只是用 "提升" 来表述比较简洁。

### for 循环

```js
for (var i = 0; i < myarray.length; i++) { }                   // 改进前
for (var i = 0, length = myarray.length; i < length; i++) { }  // 改进后

```

这种模式的问题在于每次循环都要访问数据的长度，这样会时代码变慢，特别，当 myarray 不是数组而是 DOM 集合时。

改进后需要注意的是，当 for 循环内部会改变 `length` 数值的话，需要在循环内部更新 `length` 的值。 

```js
// 再进一步改进 (注：for 结构的 3个语句都是可选的，但 2个 ; 不可省略)
for (var i = array.length; i--;) { }  // 最少变量且运算量也减小了
```

### for-in 循环

for-in 循环也被称为 枚举，用来遍历非数组对象。

当然 for-in 也适用于数组，但是不推荐用于数组，ES5 中专门提供了 `forEach()` 方法。

`hasOwnProperty()` 方法用于过滤原型链上的属性。ES5 中提供的 `keys()` 方法用于获取对象的自由可遍历属性名称。


### 不要修改内置对象原型

修改内置对象原型是一个增强功能的强大方法，但这会严重影响可维护性。


## 字面量和构造函数

































