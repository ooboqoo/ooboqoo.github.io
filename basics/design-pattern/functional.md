# 函数式编程

https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/  
http://www.ruanyifeng.com/blog/2012/04/functional_programming.html  


## 概述

函数式编程开始获得越来越多的关注。也许继"面向对象编程"之后，"函数式编程"会成为下一个编程的主流范式。

### 函数

首先需要区分 函数 function 和 过程 procedure 这两个概念。我们平时讲的函数其实将这两者揉在了一起。

函数这个名词来源于数学，函数通过一个给定的值，计算出另外的一个值，即上学时常见的 `f(x)`。函数通过运算返回一个值，而过程只执行一段代码，没有返回值。

```js
function f1() { return 2; }              // 函数
function f2(x) { return x + 1; }         // 函数
function f3() { console.log('hello'); }  // 过程
```

### 函数式编程

**函数式编程(functional programming)** 是一种 **编程范式(programming paradigm)**，也就是如何编写程序的方法论。它属于 **结构化编程** 的一种，主要思想是把运算过程尽量写成一系列嵌套的函数调用。

```js
// 用函数式编程实现表达式求值 (1 + 2) * 3 - 4
var result = subtract(multiply(add(1, 2), 3), 4);  // 典型的函数式编程写法
var result = add(1, 2).multiply(3).subtract(4);    // 变形后更接近自然语言的表达方式
```

### 五大特点

* 函数是一等公民。
* 只用表达式不用语句。表达式是一个单纯的运算过程，有返回值；而语句指执行某种操作，没有返回值。
* 没有副作用。函数所有功能就是返回一个新值，没有其他行为，尤其是不得修改外部变量的值。
* 不修改状态。函数式编程不能通过修改外部变量来保存状态，而是使用参数来传递状态，最好的例子就是递归。
* 引用透明 referential transparency，指的是函数的运行不依赖于外部变量或状态，只依赖于输入的参数。

### 意义

* 代码简洁，开发快速。函数式编程大量使用函数，减少了代码的重复，因此程序比较短，开发速度较快。
* 接近自然语言，易于理解。函数式编程的自由度很高，可以写出很接近自然语言的代码。
* 更方便的代码管理。每一个函数都可以被看做独立单元，无副作用，有利于进行单元测试和除错，以及模块化组合。
* 易于并发编程。因为函数不修改变量所以不存在"锁"线程的问题。
* 代码的热升级。函数没有副作用，只要保证接口不变，内部实现是外部无关的，可以在运行状态下直接升级代码。

### vs 面向过程编程 vs 面向对象编程

函数式编程关心数据的映射，命令式编程关心解决问题的步骤。

函数式编程将计算描述为一种表达式求值。函数式程序就是一个表达式。

函数式编程 与 面向对象编程 这两种编程范式并不矛盾，可以结合的使用。



## 函数是一等公民

所谓 "一等公民"(first class)，指的是函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数传入另一个函数，或者作为别的函数的返回值。


## 纯函数 Pure Function

纯函数没有副作用，且幂等。

前面提到的 function 和 procedure，从副作用这个角度看，就是 pure function 没有副作用，而 procedure 恰恰相反。



## 柯里化 Curry



## 组合 Compose





